<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Material Design para usar os Icones -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/af-2.3.5/b-1.6.3/b-colvis-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/cr-1.5.2/fc-3.3.1/fh-3.1.7/kt-2.5.2/r-2.2.5/rg-1.1.2/rr-1.2.7/sc-2.0.2/sp-1.1.1/sl-1.3.1/datatables.min.css"/>

    
  </head>
  <body>


  <div class="container">
      <div class="row">
          <div class="col-sm">

                <table id="table" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th data-field="cod" data-editable="true">Cód. Usuário</th>
                        <th data-field="usuario" data-editable="true">Usuário</th>
                        <th data-field="login" data-editable="true">Login</th>  
                                                                   
                    </tr>
                </thead>
                <tbody>
                 {{#each lista}}
                    <tr>
                      <td>{{CODLOGIN}}</td>                      
                      <td>{{fullname}}</td> 
                       <td>{{NOMEUSU}}</td> 
                       
                    </tr>
                {{/each}}
                </tbody>
            </table>

          </div>

      </div>

  </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script type="text/javascript" language="javascript" src="../js/jquery-3.5.1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/af-2.3.5/b-1.6.3/b-colvis-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/cr-1.5.2/fc-3.3.1/fh-3.1.7/kt-2.5.2/r-2.2.5/rg-1.1.2/rr-1.2.7/sc-2.0.2/sp-1.1.1/sl-1.3.1/datatables.min.js"></script>


<script>

  var tablevlr =  $('#table').DataTable({
        //Agrupa os resultados
        // rowGroup:
        // {
        // dataSrc: 'group'
        // },
        //permite a seleção de itens da tabela precionando o ctr mais a linha desejada
        select: true,
        //Habilita ou Desabilita a paginação da pagina
        paging: true,
        //Habilita a rolagem da tabela e tipo o tamanho da tela para rolagem pode colocar entre 100 a 400 que fica ok
        //Use esse ou o Paging para listar os itens
         scrollY: 330,
        "scrollCollapse": true,
        "scrollX": true,
        //desabilita a pesquisa diretamente na pagina
        searching: true,
        //habilita ou desabilita a ordenação das informações
        ordering:  true,




        //aqui estou traduzindo alguns campos da planilha para portugues
        language:{
    "sEmptyTable": "Nenhum registro encontrado",
    "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
    "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
    "sInfoFiltered": "(Filtrados de _MAX_ registros)",
    "sInfoPostFix": "",
    "sInfoThousands": ".",
    "sLengthMenu": "_MENU_ resultados por página",
    "sLoadingRecords": "Carregando...",
    "sProcessing": "Processando...",
    "sZeroRecords": "Nenhum registro encontrado",
    "sSearch": "Pesquisar",
    "oPaginate": {
        "sNext": "Próximo",
        "sPrevious": "Anterior",
        "sFirst": "Primeiro",
        "sLast": "Último"
    },
    "oAria": {
        "sSortAscending": ": Ordenar colunas de forma ascendente",
        "sSortDescending": ": Ordenar colunas de forma descendente"
    },
    "select": {
        "rows": {
            "_": "Selecionado %d linhas",
            "0": "Nenhuma linha selecionada",
            "1": "Selecionado 1 linha"
        }
    },
    "buttons": {
        "copy": "Copiar para a área de transferência",
        "copyTitle": "Cópia bem sucedida",
        "copySuccess": {
            "1": "Uma linha copiada com sucesso",
            "_": "%d linhas copiadas com sucesso"
        }
    }
},
        //Adicionando botões
        buttons:[
        //comando para gerar os botões de selecionar todos e descelecionar
            // 'selectAll',
            // 'selectNone',
        //Botões para seleção das celulas
            // 'selectRows',
            // 'selectColumns',
            // 'selectCells',

        {
            //Gera uma collection para agrupar todos os botões em um unico local
                extend: 'collection',
                text: '<span class="material-icons">archive</span>',
                //define os botões que serão agrupados
                buttons: [

            //copia da tabela exibida para a area de transferencia
            {
                extend: 'copy',
                text : 'Copiar',
                title: 'Resultado da consulta',
                exportOptions: {
                columns: ':visible'
                },
                key:{
                    key: 'c',
                    altkey: true
                }
            },
            //gera o arquivo no formato xlsx
            {
                extend: 'excel',
                text : 'Excel',
                title: 'Resultado da consulta',
                key:{
                    key: 'e',
                    altkey: true
                }
            },
            {
                 //gera um arquivo csv
                extend: 'csv',
                //inseri atributos do botão https://datatables.net/reference/option/buttons.buttons.attr
                attr:
                {
                    id: 'csv',
                    role : 'tooltip'
                },
                //Altero o texto e formato a primeira letra para maiuscula
                text: 'CSV',
                //Modifico o titulo da impressão
                title: 'Resultado da consulta',
                //opção para imprimir somente o que estiver visivel na planilha conciliado com o parametro colvis
                exportOptions: {
                columns: ':visible'
                },
                key: {
                    key: 'I',
                    altkey: true
                }
            },
            //gera o pdf da tabela para impressão
            {
                extend: 'pdf',
                text : 'PDF',
                title: 'Resultado da consulta',
                orientation:'landscape',               
                key:{
                    key: 'p',
                    altkey: true
                }
            },
            //Exporta a cosnulta em formato Json
            {
                text: 'JSON',
                action: function ( e, dt, button, config ) {
                    var data = dt.buttons.exportData();

                    $.fn.dataTable.fileSave(
                        new Blob( [ JSON.stringify( data ) ] ),
                        'Export.json'
                    );
                }
            }
                ],
                dropup: true
            },
            //botão para imprimir a tabela toda, formato abaixo e para traduzir os botões
            {
                //informa que vamos extender de um botão conhecido
                extend: 'print',
                //inseri atributos do botão https://datatables.net/reference/option/buttons.buttons.attr
                attr:
                {
                    id: 'print',
                    role : 'tooltip'
                },
                //Altero o texto e formato a primeira letra para maiuscula
                text: '<span class="material-icons">print</span>',
                //Modifico o titulo da impressão
                title: 'Resultado da consulta',
                //opção para imprimir somente o que estiver visivel na planilha conciliado com o parametro colvis
                exportOptions: {
                columns: ':visible'
                },
                key: {
                    key: 'I',
                    altkey: true
                }
            },
            //usado para selecionar quais campos serão exibidos ou não na tabela
            {
            extend: 'colvis',
            text: '<span class="material-icons">view_module</span>',
            title: 'Resultado da consulta',
                key:{
                    key: 'c',
                    altkey: true
                }
            }
            //define a exibição das colunas https://datatables.net/reference/button/columnToggle melhor usar o colvis
            // {
            // extend: 'columnToggle',
            // columns: 1
            // }
        ],
        //resosividade da tela (+)
        responsive: false,
        columnDefs: [ {
            targets: 0,
            visible: false
        } ],
        //complemento da configuração dos botões
        dom: 'Bfrtip',

    // fim da table
    });

    //fim da função



</script>
</body>
</html>